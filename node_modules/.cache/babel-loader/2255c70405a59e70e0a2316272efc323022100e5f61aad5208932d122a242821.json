{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nimport { useCarrinhoStore } from '@/stores/carrinho';\n\n// Store e router\n\nexport default {\n  __name: 'HomePage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const carrinhoStore = useCarrinhoStore();\n\n    // Computed: lista e total\n    const carrinho = computed(() => carrinhoStore.equipamentos);\n    const router = useRouter();\n    const equipamentos = ref([]);\n    const token = localStorage.getItem('token');\n    const user = ref(null);\n    const carrinhoCount = computed(() => carrinho.value.reduce((total, item) => total + (item.quantidade || 1), 0));\n    function finalizarCompra() {\n      router.push('/compra');\n    }\n    function getQuantidade(id) {\n      const item = carrinho.value.find(p => p._id === id);\n      return item ? item.quantidade : 0;\n    }\n    function goToRegistro() {\n      router.push('/registroEquipamento');\n    }\n    function goToAddCatalog() {\n      router.push('/addToCatalog');\n    }\n    function goToUserInfo() {\n      router.push('/infoUtilizador');\n    }\n    onMounted(async () => {\n      try {\n        const res = await axios.get('http://localhost:3000/api/equipamentos');\n        equipamentos.value = res.data;\n        const resUser = await axios.get('http://localhost:3000/api/perfil', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Usu√°rio carregado:', user.value);\n        user.value = resUser.data;\n      } catch (err) {\n        console.error('Erro ao buscar equipamentos:', err);\n      }\n    });\n    const __returned__ = {\n      carrinhoStore,\n      carrinho,\n      router,\n      equipamentos,\n      token,\n      user,\n      carrinhoCount,\n      finalizarCompra,\n      getQuantidade,\n      goToRegistro,\n      goToAddCatalog,\n      goToUserInfo,\n      ref,\n      onMounted,\n      computed,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useCarrinhoStore() {\n        return useCarrinhoStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","axios","useRouter","useCarrinhoStore","carrinhoStore","carrinho","equipamentos","router","token","localStorage","getItem","user","carrinhoCount","value","reduce","total","item","quantidade","finalizarCompra","push","getQuantidade","id","find","p","_id","goToRegistro","goToAddCatalog","goToUserInfo","res","get","data","resUser","headers","Authorization","console","log","err","error"],"sources":["C:/Users/heieb/OneDrive/Ambiente de Trabalho/10ABRIL/Projeto-PTR-PTI/src/components/HomePage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header>\r\n      <h1>FromU2Me</h1>\r\n      <nav>\r\n        <ul>\r\n          <li><router-link to=\"/home\">In√≠cio</router-link></li>\r\n          <li><a href=\"#produtos\">Produtos</a></li>\r\n          <li><a href=\"#contato\">Contato</a></li>\r\n          \r\n          <button type=\"button\" id=\"regisbtn\" \r\n          v-if=\"user && (user.role === 'admin' || user.role === 'empregado' )\"\r\n          @click=\"goToRegistro\">Gerir equipamentos</button>\r\n          \r\n          <button type=\"button\" id=\"catalogbtn\"\r\n           v-if=\"user && (user.role === 'admin' || user.role === 'empregado' )\"\r\n          @click=\"goToAddCatalog\">ADDCatalogo</button>\r\n\r\n          <button type=\"button\" id=\"infobtn\"  \r\n         \r\n          @click=\"goToUserInfo\">Info do utilizador</button>\r\n          \r\n          <button type=\"button\" id=\"infobtn\" \r\n          v-if=\"user && (user.role === 'admin' )\"\r\n          @click=\"router.push('/criarLoja') \">Criar Loja</button>\r\n          \r\n          \r\n          <button\r\n            type=\"button\"\r\n            id=\"chrbtn\"\r\n            v-if=\"user && (user.role === 'admin' || user.role === 'empregado')\"\r\n            @click=\"router.push('/changerole')\"\r\n          >\r\n            Alterar a Role\r\n          </button>\r\n\r\n\r\n        </ul>\r\n      </nav>\r\n\r\n     <button @click=\"goToCarrinho\" id=\"carrinhoBtn\">\r\n  üõí Carrinho ({{ carrinhoCount }})\r\n</button>\r\n\r\n<button\r\n  v-if=\"carrinhoCount > 0\"\r\n  id=\"checkoutBtn\"\r\n  @click=\"finalizarCompra\"\r\n>\r\n  Finalizar Compra\r\n</button>\r\n\r\n\r\n    </header>\r\n\r\n    <section class=\"banner\">\r\n      <h2>Os melhores equipamentos eletr√¥nicos para voc√™!</h2>\r\n      <p>Confira nossas ofertas e garanta j√° o seu.</p>\r\n    </section>\r\n\r\n     <section id=\"produtos\" class=\"produtos\">\r\n        <router-link\r\n        class=\"produto\"\r\n        v-for=\"equipamento in equipamentos\"\r\n        :key=\"equipamento._id\"\r\n        :to=\"`/produto/${equipamento._id}`\"\r\n      >\r\n        <img :src=\"equipamento.imagem ? equipamento.imagem : '/images/default.jpg'\" alt=\"Imagem do equipamento\">\r\n        <h3>{{ equipamento.nome }}</h3>\r\n        <p>{{ equipamento.modelo }} - {{ equipamento.marca }}</p>\r\n            <p v-if=\"getQuantidade(equipamento._id) > 0\">\r\n      J√° no carrinho: {{ getQuantidade(equipamento._id) }}x\r\n    </p>\r\n\r\n        <span>Euros {{ Number(equipamento.preco).toLocaleString('pt-Pt', { minimumFractionDigits: 2 }) }}</span>\r\n      </router-link>\r\n    </section>\r\n\r\n    \r\n\r\n\r\n    <section id=\"contato\" class=\"contato\">\r\n      <h2>Entre em contato</h2>\r\n      <p>Email: contato@fromu2me.com</p>\r\n      <p>Telefone: (11) 99999-9999</p>\r\n    </section>\r\n\r\n    <footer>\r\n      <p>&copy; 2025 Loja Tech - Todos os direitos reservados.</p>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted,  computed } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\nimport { useCarrinhoStore } from '@/stores/carrinho';\r\n\r\n\r\n// Store e router\r\nconst carrinhoStore = useCarrinhoStore();\r\n\r\n\r\n// Computed: lista e total\r\nconst carrinho = computed(() => carrinhoStore.equipamentos);\r\n\r\nconst router = useRouter();\r\nconst equipamentos = ref([]);\r\nconst token = localStorage.getItem('token');\r\nconst user = ref(null);\r\nconst carrinhoCount = computed(() =>\r\n  carrinho.value.reduce((total, item) => total + (item.quantidade || 1), 0)\r\n);\r\n\r\n\r\n\r\n\r\n\r\nfunction finalizarCompra() {\r\n  router.push('/compra');\r\n}\r\n\r\nfunction getQuantidade(id) {\r\n  const item = carrinho.value.find(p => p._id === id);\r\n  return item ? item.quantidade : 0;\r\n}\r\n\r\n\r\n\r\nfunction goToRegistro() {\r\n  router.push('/registroEquipamento');\r\n}\r\n\r\nfunction goToAddCatalog() {\r\n  router.push('/addToCatalog');\r\n}\r\n\r\nfunction goToUserInfo() {\r\n  router.push('/infoUtilizador');\r\n}\r\n\r\nonMounted(async () => {\r\n\r\n  try {\r\n    const res = await axios.get('http://localhost:3000/api/equipamentos');\r\n    equipamentos.value = res.data;\r\n\r\n\r\n    const resUser = await axios.get('http://localhost:3000/api/perfil', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n  });\r\n\r\n  console.log('Usu√°rio carregado:', user.value);\r\n\r\n   user.value = resUser.data;\r\n\r\n  } catch (err) {\r\n    console.error('Erro ao buscar equipamentos:', err);\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n #carrinhoBtn, #checkoutBtn {\r\n  padding: 10px 20px;\r\n  background-color: #198754;\r\n  color: white;\r\n  font-weight: bold;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  margin: 10px;\r\n}\r\n\r\n#carrinhoBtn:hover, #checkoutBtn:hover {\r\n  background-color: #157347;\r\n}\r\n\r\n  header {\r\n    background: #0d6efd;\r\n    color: #fff;\r\n    padding: 20px;\r\n    text-align: center;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  }\r\n\r\n  #regisbtn {\r\n    padding: 10px 20px;\r\n    background-color: lightblue;\r\n    font-weight: bold;\r\n    border: none;\r\n    cursor: pointer;\r\n    transition: background-color 0.3s;\r\n  }\r\n\r\n  #regisbtn:hover {\r\n    background-color: #0d6efd;\r\n    color: white;\r\n  }\r\n\r\n  nav ul {\r\n    list-style: none;\r\n    padding: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 20px;\r\n  }\r\n\r\n  nav ul li a {\r\n    color: #fff;\r\n    text-decoration: none;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .banner {\r\n    text-align: center;\r\n    padding: 60px 20px;\r\n    background: linear-gradient(to right, #0d6efd, #6610f2);\r\n    color: #fff;\r\n  }\r\n\r\n  .produtos {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n    gap: 20px;\r\n    padding: 40px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .produto {\r\n    background: #fff;\r\n    padding: 15px;\r\n    text-align: center;\r\n    border-radius: 5px;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  }\r\n\r\n  .produto img {\r\n    max-width: 100%;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .contato {\r\n    text-align: center;\r\n    padding: 40px 20px;\r\n    background-color: #f8f9fa;\r\n  }\r\n\r\n  footer {\r\n    background: #0d6efd;\r\n    color: #fff;\r\n    text-align: center;\r\n    padding: 20px;\r\n    margin-top: 40px;\r\n    font-size: 14px;\r\n  }\r\n</style>\r\n"],"mappings":";;;;AA8FA,SAASA,GAAG,EAAEC,SAAS,EAAGC,QAAQ,QAAQ,KAAK;AAC/C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,gBAAgB,QAAQ,mBAAmB;;AAGpD;;;;;;;;IACA,MAAMC,aAAa,GAAGD,gBAAgB,CAAC,CAAC;;IAGxC;IACA,MAAME,QAAQ,GAAGL,QAAQ,CAAC,MAAMI,aAAa,CAACE,YAAY,CAAC;IAE3D,MAAMC,MAAM,GAAGL,SAAS,CAAC,CAAC;IAC1B,MAAMI,YAAY,GAAGR,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,IAAI,GAAGb,GAAG,CAAC,IAAI,CAAC;IACtB,MAAMc,aAAa,GAAGZ,QAAQ,CAAC,MAC7BK,QAAQ,CAACQ,KAAK,CAACC,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAK,IAAIC,IAAI,CAACC,UAAU,IAAI,CAAC,CAAC,EAAE,CAAC,CAC1E,CAAC;IAMD,SAASC,eAAeA,CAAA,EAAG;MACzBX,MAAM,CAACY,IAAI,CAAC,SAAS,CAAC;IACxB;IAEA,SAASC,aAAaA,CAACC,EAAE,EAAE;MACzB,MAAML,IAAI,GAAGX,QAAQ,CAACQ,KAAK,CAACS,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKH,EAAE,CAAC;MACnD,OAAOL,IAAI,GAAGA,IAAI,CAACC,UAAU,GAAG,CAAC;IACnC;IAIA,SAASQ,YAAYA,CAAA,EAAG;MACtBlB,MAAM,CAACY,IAAI,CAAC,sBAAsB,CAAC;IACrC;IAEA,SAASO,cAAcA,CAAA,EAAG;MACxBnB,MAAM,CAACY,IAAI,CAAC,eAAe,CAAC;IAC9B;IAEA,SAASQ,YAAYA,CAAA,EAAG;MACtBpB,MAAM,CAACY,IAAI,CAAC,iBAAiB,CAAC;IAChC;IAEApB,SAAS,CAAC,YAAY;MAEpB,IAAI;QACF,MAAM6B,GAAG,GAAG,MAAM3B,KAAK,CAAC4B,GAAG,CAAC,wCAAwC,CAAC;QACrEvB,YAAY,CAACO,KAAK,GAAGe,GAAG,CAACE,IAAI;QAG7B,MAAMC,OAAO,GAAG,MAAM9B,KAAK,CAAC4B,GAAG,CAAC,kCAAkC,EAAE;UAClEG,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUzB,KAAK;UAChC;QACJ,CAAC,CAAC;QAEF0B,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAExB,IAAI,CAACE,KAAK,CAAC;QAE5CF,IAAI,CAACE,KAAK,GAAGkB,OAAO,CAACD,IAAI;MAE1B,CAAC,CAAC,OAAOM,GAAG,EAAE;QACZF,OAAO,CAACG,KAAK,CAAC,8BAA8B,EAAED,GAAG,CAAC;MACpD;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}