{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"produtos\",\n  class: \"produtos\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"header\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"h1\", null, \"FromU2Me\", -1 /* HOISTED */)), _createElementVNode(\"nav\", null, [_createElementVNode(\"ul\", null, [_createElementVNode(\"li\", null, [_createVNode(_component_router_link, {\n    to: \"/home\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"InÃ­cio\")])),\n    _: 1 /* STABLE */\n  })]), _cache[4] || (_cache[4] = _createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    href: \"#produtos\"\n  }, \"Produtos\")], -1 /* HOISTED */)), _cache[5] || (_cache[5] = _createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    href: \"#contato\"\n  }, \"Contato\")], -1 /* HOISTED */)), $setup.user && ($setup.user.role === 'admin' || $setup.user.role === 'empregado') ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    type: \"button\",\n    id: \"regisbtn\",\n    onClick: $setup.goToRegistro\n  }, \"Gerir equipamentos\")) : _createCommentVNode(\"v-if\", true), $setup.user && ($setup.user.role === 'admin' || $setup.user.role === 'empregado') ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    type: \"button\",\n    id: \"catalogbtn\",\n    onClick: $setup.goToAddCatalog\n  }, \"ADDCatalogo\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    type: \"button\",\n    id: \"infobtn\",\n    onClick: $setup.goToUserInfo\n  }, \"Info do utilizador\"), $setup.user && $setup.user.role === 'admin' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    type: \"button\",\n    id: \"infobtn\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.router.push('/criarLoja'))\n  }, \"Criar Loja\")) : _createCommentVNode(\"v-if\", true), $setup.user && ($setup.user.role === 'admin' || $setup.user.role === 'empregado') ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 3,\n    type: \"button\",\n    id: \"chrbtn\",\n    onClick: _cache[1] || (_cache[1] = $event => $setup.router.push('/changerole'))\n  }, \" Alterar a Role \")) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.goToCarrinho && _ctx.goToCarrinho(...args)),\n    id: \"carrinhoBtn\"\n  }, \" ðŸ›’ Carrinho (\" + _toDisplayString($setup.carrinhoCount) + \") \", 1 /* TEXT */), $setup.carrinhoCount > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    id: \"checkoutBtn\",\n    onClick: $setup.finalizarCompra\n  }, \" Finalizar Compra \")) : _createCommentVNode(\"v-if\", true)]), _cache[7] || (_cache[7] = _createElementVNode(\"section\", {\n    class: \"banner\"\n  }, [_createElementVNode(\"h2\", null, \"Os melhores equipamentos eletrÃ´nicos para vocÃª!\"), _createElementVNode(\"p\", null, \"Confira nossas ofertas e garanta jÃ¡ o seu.\")], -1 /* HOISTED */)), _createElementVNode(\"section\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.equipamentos, equipamento => {\n    return _openBlock(), _createBlock(_component_router_link, {\n      class: \"produto\",\n      key: equipamento._id,\n      to: `/produto/${equipamento._id}`\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"img\", {\n        src: equipamento.imagem ? equipamento.imagem : '/images/default.jpg',\n        alt: \"Imagem do equipamento\"\n      }, null, 8 /* PROPS */, _hoisted_2), _createElementVNode(\"h3\", null, _toDisplayString(equipamento.nome), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(equipamento.modelo) + \" - \" + _toDisplayString(equipamento.marca), 1 /* TEXT */), _ctx.getQuantidade(equipamento._id) > 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, \" JÃ¡ no carrinho: \" + _toDisplayString(_ctx.getQuantidade(equipamento._id)) + \"x \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"span\", null, \"Euros \" + _toDisplayString(Number(equipamento.preco).toLocaleString('pt-Pt', {\n        minimumFractionDigits: 2\n      })), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), _cache[8] || (_cache[8] = _createElementVNode(\"section\", {\n    id: \"contato\",\n    class: \"contato\"\n  }, [_createElementVNode(\"h2\", null, \"Entre em contato\"), _createElementVNode(\"p\", null, \"Email: contato@fromu2me.com\"), _createElementVNode(\"p\", null, \"Telefone: (11) 99999-9999\")], -1 /* HOISTED */)), _cache[9] || (_cache[9] = _createElementVNode(\"footer\", null, [_createElementVNode(\"p\", null, \"Â© 2025 Loja Tech - Todos os direitos reservados.\")], -1 /* HOISTED */))]);\n}","map":{"version":3,"names":["id","class","key","_createElementBlock","_createElementVNode","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","href","$setup","user","role","type","onClick","goToRegistro","_createCommentVNode","goToAddCatalog","goToUserInfo","$event","router","push","args","_ctx","goToCarrinho","_toDisplayString","carrinhoCount","finalizarCompra","_hoisted_1","_Fragment","_renderList","equipamentos","equipamento","_createBlock","_id","src","imagem","alt","_hoisted_2","nome","modelo","marca","getQuantidade","_hoisted_3","Number","preco","toLocaleString","minimumFractionDigits"],"sources":["C:\\Users\\heieb\\OneDrive\\Ambiente de Trabalho\\10ABRIL\\Projeto-PTR-PTI\\src\\components\\HomePage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header>\r\n      <h1>FromU2Me</h1>\r\n      <nav>\r\n        <ul>\r\n          <li><router-link to=\"/home\">InÃ­cio</router-link></li>\r\n          <li><a href=\"#produtos\">Produtos</a></li>\r\n          <li><a href=\"#contato\">Contato</a></li>\r\n          \r\n          <button type=\"button\" id=\"regisbtn\" \r\n          v-if=\"user && (user.role === 'admin' || user.role === 'empregado' )\"\r\n          @click=\"goToRegistro\">Gerir equipamentos</button>\r\n          \r\n          <button type=\"button\" id=\"catalogbtn\"\r\n           v-if=\"user && (user.role === 'admin' || user.role === 'empregado' )\"\r\n          @click=\"goToAddCatalog\">ADDCatalogo</button>\r\n\r\n          <button type=\"button\" id=\"infobtn\"  \r\n         \r\n          @click=\"goToUserInfo\">Info do utilizador</button>\r\n          \r\n          <button type=\"button\" id=\"infobtn\" \r\n          v-if=\"user && (user.role === 'admin' )\"\r\n          @click=\"router.push('/criarLoja') \">Criar Loja</button>\r\n          \r\n          \r\n          <button\r\n            type=\"button\"\r\n            id=\"chrbtn\"\r\n            v-if=\"user && (user.role === 'admin' || user.role === 'empregado')\"\r\n            @click=\"router.push('/changerole')\"\r\n          >\r\n            Alterar a Role\r\n          </button>\r\n\r\n\r\n        </ul>\r\n      </nav>\r\n\r\n     <button @click=\"goToCarrinho\" id=\"carrinhoBtn\">\r\n  ðŸ›’ Carrinho ({{ carrinhoCount }})\r\n</button>\r\n\r\n<button\r\n  v-if=\"carrinhoCount > 0\"\r\n  id=\"checkoutBtn\"\r\n  @click=\"finalizarCompra\"\r\n>\r\n  Finalizar Compra\r\n</button>\r\n\r\n\r\n    </header>\r\n\r\n    <section class=\"banner\">\r\n      <h2>Os melhores equipamentos eletrÃ´nicos para vocÃª!</h2>\r\n      <p>Confira nossas ofertas e garanta jÃ¡ o seu.</p>\r\n    </section>\r\n\r\n     <section id=\"produtos\" class=\"produtos\">\r\n        <router-link\r\n        class=\"produto\"\r\n        v-for=\"equipamento in equipamentos\"\r\n        :key=\"equipamento._id\"\r\n        :to=\"`/produto/${equipamento._id}`\"\r\n      >\r\n        <img :src=\"equipamento.imagem ? equipamento.imagem : '/images/default.jpg'\" alt=\"Imagem do equipamento\">\r\n        <h3>{{ equipamento.nome }}</h3>\r\n        <p>{{ equipamento.modelo }} - {{ equipamento.marca }}</p>\r\n            <p v-if=\"getQuantidade(equipamento._id) > 0\">\r\n      JÃ¡ no carrinho: {{ getQuantidade(equipamento._id) }}x\r\n    </p>\r\n\r\n        <span>Euros {{ Number(equipamento.preco).toLocaleString('pt-Pt', { minimumFractionDigits: 2 }) }}</span>\r\n      </router-link>\r\n    </section>\r\n\r\n    \r\n\r\n\r\n    <section id=\"contato\" class=\"contato\">\r\n      <h2>Entre em contato</h2>\r\n      <p>Email: contato@fromu2me.com</p>\r\n      <p>Telefone: (11) 99999-9999</p>\r\n    </section>\r\n\r\n    <footer>\r\n      <p>&copy; 2025 Loja Tech - Todos os direitos reservados.</p>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted,  computed } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\nimport { useCarrinhoStore } from '@/stores/carrinho';\r\n\r\n\r\n// Store e router\r\nconst carrinhoStore = useCarrinhoStore();\r\n\r\n\r\n// Computed: lista e total\r\nconst carrinho = computed(() => carrinhoStore.equipamentos);\r\n\r\n\r\nconst router = useRouter();\r\nconst equipamentos = ref([]);\r\nconst token = localStorage.getItem('token');\r\nconst user = ref(null);\r\nconst carrinhoCount = computed(() =>\r\n  carrinho.value.reduce((total, item) => total + (item.quantidade || 1), 0)\r\n);\r\n\r\n\r\n\r\n\r\n\r\nfunction finalizarCompra() {\r\n  router.push('/finalizar-compra');\r\n}\r\n\r\n\r\n\r\n\r\nfunction goToRegistro() {\r\n  router.push('/registroEquipamento');\r\n}\r\n\r\nfunction goToAddCatalog() {\r\n  router.push('/addToCatalog');\r\n}\r\n\r\nfunction goToUserInfo() {\r\n  router.push('/infoUtilizador');\r\n}\r\n\r\nonMounted(async () => {\r\n  atualizarCarrinho();\r\n  window.addEventListener('storage', atualizarCarrinho); // atualiza se carrinho mudar noutra aba\r\n\r\n  try {\r\n    const res = await axios.get('http://localhost:3000/api/equipamentos');\r\n    equipamentos.value = res.data;\r\n\r\n\r\n    const resUser = await axios.get('http://localhost:3000/api/perfil', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n  });\r\n\r\n  console.log('UsuÃ¡rio carregado:', user.value);\r\n\r\n   user.value = resUser.data;\r\n\r\n  } catch (err) {\r\n    console.error('Erro ao buscar equipamentos:', err);\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n #carrinhoBtn, #checkoutBtn {\r\n  padding: 10px 20px;\r\n  background-color: #198754;\r\n  color: white;\r\n  font-weight: bold;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  margin: 10px;\r\n}\r\n\r\n#carrinhoBtn:hover, #checkoutBtn:hover {\r\n  background-color: #157347;\r\n}\r\n\r\n  header {\r\n    background: #0d6efd;\r\n    color: #fff;\r\n    padding: 20px;\r\n    text-align: center;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  }\r\n\r\n  #regisbtn {\r\n    padding: 10px 20px;\r\n    background-color: lightblue;\r\n    font-weight: bold;\r\n    border: none;\r\n    cursor: pointer;\r\n    transition: background-color 0.3s;\r\n  }\r\n\r\n  #regisbtn:hover {\r\n    background-color: #0d6efd;\r\n    color: white;\r\n  }\r\n\r\n  nav ul {\r\n    list-style: none;\r\n    padding: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 20px;\r\n  }\r\n\r\n  nav ul li a {\r\n    color: #fff;\r\n    text-decoration: none;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .banner {\r\n    text-align: center;\r\n    padding: 60px 20px;\r\n    background: linear-gradient(to right, #0d6efd, #6610f2);\r\n    color: #fff;\r\n  }\r\n\r\n  .produtos {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n    gap: 20px;\r\n    padding: 40px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .produto {\r\n    background: #fff;\r\n    padding: 15px;\r\n    text-align: center;\r\n    border-radius: 5px;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  }\r\n\r\n  .produto img {\r\n    max-width: 100%;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .contato {\r\n    text-align: center;\r\n    padding: 40px 20px;\r\n    background-color: #f8f9fa;\r\n  }\r\n\r\n  footer {\r\n    background: #0d6efd;\r\n    color: #fff;\r\n    text-align: center;\r\n    padding: 20px;\r\n    margin-top: 40px;\r\n    font-size: 14px;\r\n  }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}