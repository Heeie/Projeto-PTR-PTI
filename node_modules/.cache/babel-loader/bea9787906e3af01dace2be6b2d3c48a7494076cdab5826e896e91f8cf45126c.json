{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"homebar\"\n};\nconst _hoisted_2 = {\n  class: \"homebar\"\n};\nconst _hoisted_3 = {\n  class: \"compra\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"mensagem\"\n};\nconst _hoisted_6 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"header\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", null, \"Finalizar Compra\", -1 /* HOISTED */)), _createElementVNode(\"nav\", null, [_createElementVNode(\"ul\", null, [_createElementVNode(\"li\", _hoisted_1, [_createVNode(_component_router_link, {\n    to: \"/home\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"Início\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"li\", _hoisted_2, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Produtos\")])),\n    _: 1 /* STABLE */\n  })])])])]), _createElementVNode(\"section\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"h2\", null, \"Itens no Carrinho\", -1 /* HOISTED */)), $setup.carrinho.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.carrinho, (item, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, _toDisplayString(item.nome) + \" - € \" + _toDisplayString(Number(item.preco).toFixed(2)), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Total:\", -1 /* HOISTED */)), _createTextVNode(\" € \" + _toDisplayString($setup.total.toFixed(2)), 1 /* TEXT */)]), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.finalizarCompra, [\"prevent\"])\n  }, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"mbway\"\n  }, \"Número de Telemóvel (MBWay):\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"tel\",\n    id: \"mbway\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.numeroMBWay = $event),\n    placeholder: \"912345678\",\n    required: \"\",\n    pattern: \"[9][1236][0-9]{7}\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.numeroMBWay]]), _cache[6] || (_cache[6] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Pagar com MBWay\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), $setup.mensagem ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString($setup.mensagem), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[7] || (_cache[7] = [_createElementVNode(\"p\", null, \"O carrinho está vazio.\", -1 /* HOISTED */)])))]), _cache[9] || (_cache[9] = _createElementVNode(\"footer\", null, [_createElementVNode(\"p\", null, \"© 2025 Loja Tech - Todos os direitos reservados.\")], -1 /* HOISTED */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_createElementVNode","_hoisted_1","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_2","_hoisted_3","$setup","carrinho","length","_hoisted_4","_Fragment","_renderList","item","index","_toDisplayString","nome","Number","preco","toFixed","total","onSubmit","_withModifiers","finalizarCompra","for","type","id","$event","numeroMBWay","placeholder","required","pattern","mensagem","_hoisted_5","_createCommentVNode","_hoisted_6"],"sources":["C:\\Users\\heieb\\OneDrive\\Ambiente de Trabalho\\10ABRIL\\Projeto-PTR-PTI\\src\\components\\CompraProduto.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header>\r\n      <h1>Finalizar Compra</h1>\r\n      <nav>\r\n        <ul>\r\n          <li class=\"homebar\"><router-link to=\"/home\">Início</router-link></li>\r\n          <li class=\"homebar\"><router-link to=\"/\">Produtos</router-link></li>\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n\r\n    <section class=\"compra\">\r\n      <h2>Itens no Carrinho</h2>\r\n      <div v-if=\"carrinho.length > 0\">\r\n        <ul>\r\n          <li v-for=\"(item, index) in carrinho\" :key=\"index\">\r\n            {{ item.nome }} - € {{ Number(item.preco).toFixed(2) }}\r\n          </li>\r\n        </ul>\r\n        <p><strong>Total:</strong> € {{ total.toFixed(2) }}</p>\r\n\r\n        <form @submit.prevent=\"finalizarCompra\">\r\n          <label for=\"mbway\">Número de Telemóvel (MBWay):</label>\r\n          <input\r\n            type=\"tel\"\r\n            id=\"mbway\"\r\n            v-model=\"numeroMBWay\"\r\n            placeholder=\"912345678\"\r\n            required\r\n            pattern=\"[9][1236][0-9]{7}\"\r\n          />\r\n          <button type=\"submit\">Pagar com MBWay</button>\r\n        </form>\r\n\r\n        <div v-if=\"mensagem\" class=\"mensagem\">{{ mensagem }}</div>\r\n\r\n      </div>\r\n      <div v-else>\r\n        <p>O carrinho está vazio.</p>\r\n      </div>\r\n    </section>\r\n\r\n    <footer>\r\n      <p>&copy; 2025 Loja Tech - Todos os direitos reservados.</p>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport { useCarrinhoStore } from '@/stores/carrinho';\r\nimport { useRouter } from 'vue-router';\r\n\r\n// Store e router\r\nconst carrinhoStore = useCarrinhoStore();\r\nconst router = useRouter();\r\n\r\n// Referências reativas\r\nconst numeroMBWay = ref('');\r\nconst mensagem = ref('');\r\n\r\n// Computed: lista e total\r\nconst carrinho = computed(() => carrinhoStore.equipamentos);\r\nconst total = computed(() =>\r\n  carrinho.value.reduce((soma, item) => soma + Number(item.preco), 0)\r\n);\r\n\r\n// Simulação de transação MBWay\r\nasync function finalizarCompra() {\r\n  if (!numeroMBWay.value.match(/^9[1236][0-9]{7}$/)) {\r\n    mensagem.value = 'Número MBWay inválido.';\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Aqui seria a chamada real à API do MBWay\r\n    await new Promise((resolve) => setTimeout(resolve, 1500)); // simulação de espera\r\n\r\n    mensagem.value = `Pagamento MBWay para ${numeroMBWay.value} concluído com sucesso!`;\r\n    carrinhoStore.limparCarrinho();\r\n\r\n    setTimeout(() => {\r\n      router.push('/home');\r\n    }, 30000);\r\n  } catch (error) {\r\n    mensagem.value = 'Erro ao processar pagamento. Tente novamente.';\r\n    console.error(error);\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.homebar{\r\n  color: black;\r\n}\r\nheader {\r\n  background: #0d6efd;\r\n  color: #fff;\r\n  padding: 20px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nnav ul {\r\n  list-style: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 20px;\r\n  padding: 0;\r\n}\r\n\r\nnav ul li a {\r\n  color: #975d5d;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n}\r\n\r\n.compra {\r\n  padding: 40px;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  background-color: #f4f6ff;\r\n  border-radius: 12px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.compra h2 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\nul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\nli {\r\n  background: white;\r\n  padding: 10px;\r\n  margin-bottom: 8px;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nform {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\ninput {\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 6px;\r\n}\r\n\r\nbutton {\r\n  background-color: #198754;\r\n  color: white;\r\n  padding: 12px;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #146c43;\r\n}\r\n\r\n.mensagem {\r\n  margin-top: 15px;\r\n  font-weight: bold;\r\n  color: green;\r\n  text-align: center;\r\n}\r\n\r\nfooter {\r\n  background: #0d6efd;\r\n  color: #fff;\r\n  text-align: center;\r\n  padding: 20px;\r\n  margin-top: 40px;\r\n  font-size: 14px;\r\n}\r\n</style>"],"mappings":";;EAMcA,KAAK,EAAC;AAAS;;EACfA,KAAK,EAAC;AAAS;;EAKhBA,KAAK,EAAC;AAAQ;;EAZ3BC,GAAA;AAAA;;EAAAA,GAAA;EAmC6BD,KAAK,EAAC;;;EAnCnCC,GAAA;AAAA;;;uBACEC,mBAAA,CA6CM,cA5CJC,mBAAA,CAQS,iB,0BAPPA,mBAAA,CAAyB,YAArB,kBAAgB,sBACpBA,mBAAA,CAKM,cAJJA,mBAAA,CAGK,aAFHA,mBAAA,CAAqE,MAArEC,UAAqE,GAAjDC,YAAA,CAA4CC,sBAAA;IAA/BC,EAAE,EAAC;EAAO;IANrDC,OAAA,EAAAC,QAAA,CAMsD,MAAMC,MAAA,QAAAA,MAAA,OAN5DC,gBAAA,CAMsD,QAAM,E;IAN5DC,CAAA;QAOUT,mBAAA,CAAmE,MAAnEU,UAAmE,GAA/CR,YAAA,CAA0CC,sBAAA;IAA7BC,EAAE,EAAC;EAAG;IAPjDC,OAAA,EAAAC,QAAA,CAOkD,MAAQC,MAAA,QAAAA,MAAA,OAP1DC,gBAAA,CAOkD,UAAQ,E;IAP1DC,CAAA;cAYIT,mBAAA,CA6BU,WA7BVW,UA6BU,G,0BA5BRX,mBAAA,CAA0B,YAAtB,mBAAiB,sBACVY,MAAA,CAAAC,QAAQ,CAACC,MAAM,Q,cAA1Bf,mBAAA,CAuBM,OArCZgB,UAAA,GAeQf,mBAAA,CAIK,c,kBAHHD,mBAAA,CAEKiB,SAAA,QAlBfC,WAAA,CAgBsCL,MAAA,CAAAC,QAAQ,EAhB9C,CAgBsBK,IAAI,EAAEC,KAAK;yBAAvBpB,mBAAA,CAEK;MAFkCD,GAAG,EAAEqB;IAAK,GAAAC,gBAAA,CAC5CF,IAAI,CAACG,IAAI,IAAG,OAAK,GAAAD,gBAAA,CAAGE,MAAM,CAACJ,IAAI,CAACK,KAAK,EAAEC,OAAO;oCAGrDxB,mBAAA,CAAuD,Y,0BAApDA,mBAAA,CAAuB,gBAAf,QAAM,sBApBzBQ,gBAAA,CAoBkC,KAAG,GAAAY,gBAAA,CAAGR,MAAA,CAAAa,KAAK,CAACD,OAAO,oB,GAE7CxB,mBAAA,CAWO;IAXA0B,QAAM,EAtBrBC,cAAA,CAsB+Bf,MAAA,CAAAgB,eAAe;gCACpC5B,mBAAA,CAAuD;IAAhD6B,GAAG,EAAC;EAAO,GAAC,8BAA4B,sB,gBAC/C7B,mBAAA,CAOE;IANA8B,IAAI,EAAC,KAAK;IACVC,EAAE,EAAC,OAAO;IA1BtB,uBAAAxB,MAAA,QAAAA,MAAA,MAAAyB,MAAA,IA2BqBpB,MAAA,CAAAqB,WAAW,GAAAD,MAAA;IACpBE,WAAW,EAAC,WAAW;IACvBC,QAAQ,EAAR,EAAQ;IACRC,OAAO,EAAC;iDAHCxB,MAAA,CAAAqB,WAAW,E,6BAKtBjC,mBAAA,CAA8C;IAAtC8B,IAAI,EAAC;EAAQ,GAAC,iBAAe,qB,4BAG5BlB,MAAA,CAAAyB,QAAQ,I,cAAnBtC,mBAAA,CAA0D,OAA1DuC,UAA0D,EAAAlB,gBAAA,CAAjBR,MAAA,CAAAyB,QAAQ,oBAnCzDE,mBAAA,e,oBAsCMxC,mBAAA,CAEM,OAxCZyC,UAAA,EAAAjC,MAAA,QAAAA,MAAA,OAuCQP,mBAAA,CAA6B,WAA1B,wBAAsB,oB,iCAI7BA,mBAAA,CAES,iBADPA,mBAAA,CAA4D,WAAzD,kDAAqD,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}